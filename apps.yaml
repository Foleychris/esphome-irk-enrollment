---
global_modules:
  - influx

offset_calibration:
  class: OffsetCalibration
  module: temperature
  global_dependencies:
    - influx
  climate_entity: climate.thermostat_2
  temperature_entity:
    - sensor.main_floor_sensor_bme280_temperature
    - sensor.bedroom_sensor_bme280_temperature
    - sensor.david_office_sensor_bme280_temperature
    - sensor.aysylu_office_sensor_bme280_temperature

convergence_speed_calibration:
  class: ConvergenceSpeedCalibration
  module: temperature
  global_dependencies:
    - influx
  climate_entity: climate.thermostat_2

bedroom_goal:
  class: ClimateGoal
  module: temperature
  dependencies:
    - offset_calibration
  people_trackers:
    - device_tracker.david_iphone
    - device_tracker.aysylu_iphone
  presence_ent: True
  room: bedroom
  temp_ent: sensor.bedroom_sensor_bme280_temperature
  preferences:
    safe:
      high: 80
      low: 60
    tolerable:
      high: 76
      low: 67
    agreeable:
      high: 74
      low: 69
  tasks:
    dna_sleeping:
      high: 72
      low: 68
      selfish: True # means that we are the only goal that matters

main_floor_goal:
  class: ClimateGoal
  module: temperature
  dependencies:
    - offset_calibration
  people_trackers:
    - device_tracker.david_iphone
    - device_tracker.aysylu_iphone
  presence_ent: True
  room: main
  temp_ent: sensor.main_floor_sensor_bme280_temperature
  preferences:
    safe:
      high: 80
      low: 60
    tolerable:
      high: 76
      low: 67
    agreeable:
      high: 74
      low: 69

aysylu_office_goal:
  class: ClimateGoal
  module: temperature
  dependencies:
    - offset_calibration
  people_trackers:
    - device_tracker.aysylu_iphone
  presence_ent: True
  room: aysylu_office
  temp_ent: sensor.aysylu_office_sensor_bme280_temperature
  preferences:
    safe:
      high: 86
      low: 60
    tolerable:
      high: 76
      low: 67
    agreeable:
      high: 74
      low: 70

david_office_goal:
  class: ClimateGoal
  module: temperature
  dependencies:
    - offset_calibration
  people_trackers:
    - device_tracker.david_iphone
  presence_ent: True
  room: david_office
  temp_ent: sensor.david_office_sensor_bme280_temperature
  preferences:
    safe:
      high: 86
      low: 60
    tolerable:
      high: 76
      low: 67
    agreeable:
      high: 74
      low: 69

quarterdeck_impl:
  class: ClimateImplementor
  module: temperature
  dependencies:
    - david_office_goal
    - main_floor_goal
    - aysylu_office_goal
    - bedroom_goal
  climate_entity: climate.thermostat_2
  weather_entity: weather.home
  max_temp_for_heat: 70
  min_temp_for_ac: 60
  rooms:
    - main
    - bedroom
    - david_office
    - aysylu_office

tracker_test:
  class: IrkTracker
  module: irk_tracker
  training_input_text: input_text.irk_tag
  data_loc: tracker_logs/
  rows_per_flush: 100
